<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸä½æ°‘å§“æ°å£“è¿«æ­·å²é«”é©—éŠæˆ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .progress-container {
            padding: 20px 30px;
            background: #f8fafc;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a855f7);
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #64748b;
            font-size: 0.9rem;
        }

        .content {
            padding: 30px;
        }

        .name-display {
            text-align: center;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .name-display h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .name-display .current-name {
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .era-card {
            background: white;
            border: 3px solid #8b5cf6;
            border-radius: 12px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .era-header {
            background: #8b5cf6;
            color: white;
            padding: 20px;
        }

        .era-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .era-content {
            padding: 25px;
        }

        .info-box {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }

        .info-background {
            background: #f1f5f9;
            border-left-color: #64748b;
        }

        .info-pressure {
            background: #fef2f2;
            border-left-color: #ef4444;
        }

        .info-freedom {
            background: #f0fdf4;
            border-left-color: #22c55e;
        }

        .info-irony {
            background: #fffbeb;
            border-left-color: #f59e0b;
        }

        .info-title {
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .question-section {
            background: #dbeafe;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .question-title {
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid #3b82f6;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
        }

        .option-btn:hover {
            background: #dbeafe;
            border-color: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .emotion-feedback {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-top: 20px;
            animation: slideIn 0.5s ease;
        }

        .emotion-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .emotion-text {
            color: #92400e;
            font-style: italic;
            line-height: 1.6;
        }

        .end-screen {
            text-align: center;
        }

        .end-title {
            color: #dc2626;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .history-timeline {
            margin: 30px 0;
        }

        .timeline-item {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }

        .timeline-original {
            background: #dcfce7;
            border-left-color: #22c55e;
        }

        .timeline-forced {
            background: #fecaca;
            border-left-color: #ef4444;
        }

        .timeline-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .timeline-desc {
            font-size: 0.9rem;
            color: #64748b;
        }

        .lesson-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .lesson-card {
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .lesson-trauma {
            background: #fef2f2;
            border-left-color: #ef4444;
        }

        .lesson-culture {
            background: #fefce8;
            border-left-color: #eab308;
        }

        .lesson-justice {
            background: #fef2f2;
            border-left-color: #dc2626;
        }

        .final-verdict {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .verdict-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .verdict-content {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .reset-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .lesson-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>åŸä½æ°‘å§“æ°å£“è¿«å²</h1>
            <p>é«”é©—400å¹´ä¾†è¢«è¿«æ”¹åçš„æ­·å²å‰µå‚·</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">æ™‚ä»£ 1 / 6</div>
        </div>

        <div class="content" id="gameContent">
            <!-- éŠæˆ²å…§å®¹å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let currentEra = 0;
        let playerName = 'å±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹';
        let showEmotion = false;
        let nameHistory = [];

        // æ­·å²æ™‚ä»£è³‡æ–™
        const historicalEras = [
            {
                period: '1600å¹´ - å‚³çµ±æ™‚æœŸ',
                background: 'ä½ æ˜¯æ’ç£æ—é”é­¯ç‘ªå…‹å®¶æ—çš„é•·å­ï¼Œåå«ã€Œå±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹ã€',
                context: 'åœ¨éƒ¨è½è£¡ï¼Œä½ çš„åå­—å°±æ˜¯ä½ çš„èº«åˆ†è­‰æ˜ã€‚ã€Œå±‹å·´å…‹ã€æ˜¯ä½ çš„å€‹äººåï¼Œä»£è¡¨ã€Œå‹‡æ•¢çš„çµäººã€ï¼›ã€Œé”é­¯ç‘ªå…‹ã€æ˜¯ä½ å®¶æ—çš„åå­—ï¼Œä»£è¡¨ã€Œå±±é ‚çš„å®ˆè­·è€…ã€ã€‚',
                freedom: 'ä½ å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨æ—èªï¼Œåƒèˆ‡ç¥­å…¸ï¼ŒæŒ‰ç…§ç¥–å…ˆçš„æ–¹å¼ç”Ÿæ´»ã€‚æ¯å€‹äººéƒ½çŸ¥é“ä½ æ˜¯èª°ï¼Œä½ å±¬æ–¼å“ªå€‹å®¶æ—ã€‚',
                question: 'æœ‰äººå•ä½ ï¼šã€Œä½ æ˜¯èª°ï¼Ÿã€',
                type: 'freedom',
                options: [
                    {
                        text: 'æˆ‘æ˜¯å±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹ï¼Œå±±é ‚å®ˆè­·è€…å®¶æ—çš„å‹‡æ•¢çµäºº',
                        emotion: 'ğŸ˜Š',
                        response: 'ä½ è‡ªè±ªåœ°å®£å‘Šè‡ªå·±çš„èº«åˆ†ï¼Œæ—äººå€‘éƒ½é»é ­èªåŒã€‚ä½ çš„åå­—å°±æ˜¯ä½ çš„ä¸€åˆ‡ã€‚'
                    },
                    {
                        text: 'æˆ‘æ˜¯éƒ¨è½çš„å­©å­ï¼Œé€™ç‰‡åœŸåœ°æ˜¯æˆ‘çš„å®¶',
                        emotion: 'ğŸ¥°',
                        response: 'ä½ æ„Ÿå—åˆ°èˆ‡åœŸåœ°å’Œæ—äººæ·±æ·±çš„é€£çµï¼Œé€™ç¨®æ­¸å±¬æ„Ÿè®“ä½ å…§å¿ƒå……æ»¿æº«æš–ã€‚'
                    }
                ]
            },
            {
                period: '1700å¹´ - æ¸…æœçµ±æ²»',
                background: 'æ¸…æœå®˜å“¡ä¾†åˆ°éƒ¨è½ï¼Œå®£å¸ƒæ–°æ”¿ç­–',
                context: 'å®˜å“¡èªªï¼šã€Œæ‰€æœ‰ç•ªæ°‘å¿…é ˆæ­¸åŒ–ï¼Œæ¥å—æœå»·è³œå§“ï¼Œæ‰èƒ½ç²å¾—è‰¯æ°‘èº«åˆ†ï¼Œå—åˆ°ä¿è­·ã€‚ã€',
                pressure: 'å¦‚æœä¸æ¥å—æ¼¢å§“ï¼Œä½ å€‘å°‡è¢«è¦–ç‚ºã€ŒåŒ–å¤–ä¹‹æ°‘ã€ï¼Œç„¡æ³•ç¶“å•†ï¼Œå­©å­ä¸èƒ½è®€æ›¸ï¼Œé‚„å¯èƒ½é¢è‡¨è»äº‹é®å£“ã€‚',
                dilemma: 'å®˜å“¡æŒ‡è‘—ä½ èªªï¼šã€Œä½ å¾ä»Šä»¥å¾Œå§“ã€æã€ï¼Œå«æé”é­¯ã€‚ã€é€™æ˜¯ä½ äººç”Ÿç¬¬ä¸€æ¬¡è¢«è¿«æ”¹åã€‚',
                question: 'é¢å°é€™å€‹è¦æ±‚ï¼Œä½ çš„å…§å¿ƒæ˜¯ï¼Ÿ',
                type: 'pressure',
                options: [
                    {
                        text: 'ç‚ºäº†æ—äººå®‰å…¨ï¼Œæˆ‘æ¥å—é€™å€‹æ¼¢å§“',
                        emotion: 'ğŸ˜”',
                        response: 'ä½ å’¬ç‰™æ¥å—ï¼Œå¿ƒæƒ³ï¼šã€Œåªè¦èƒ½ä¿è­·æ—äºº...ã€ä½†å¤±å»å®¶æ—åè®“ä½ å…§å¿ƒæ·Œè¡€ã€‚',
                        newName: 'æé”é­¯'
                    },
                    {
                        text: 'æˆ‘çµ•ä¸æ”¾æ£„ç¥–å…ˆçµ¦æˆ‘çš„åå­—ï¼',
                        emotion: 'ğŸ˜ ',
                        response: 'ä½ æ†¤æ€’æŠ—æ‹’ï¼Œä½†çœ‹åˆ°å®˜å…µçš„åˆ€åŠï¼Œæœ€çµ‚é‚„æ˜¯å±ˆæœäº†...ä½ æ¨è‡ªå·±çš„ç„¡åŠ›ã€‚',
                        newName: 'æé”é­¯'
                    }
                ]
            },
            {
                period: '1895å¹´ - æ—¥æ²»åˆæœŸ',
                background: 'æ—¥æœ¬äººä¾†äº†ï¼Œå¸¶ä¾†æ–°çš„çµ±æ²»æ–¹å¼',
                context: 'æ—¥æœ¬æ”¿åºœåˆæœŸå…è¨±ä½ ä¿æŒã€Œæé”é­¯ã€é€™å€‹åå­—ï¼Œä½†è¦æ±‚ä½ å­¸ç¿’æ—¥èªï¼Œæ¥å—ã€Œæ–‡æ˜é–‹åŒ–ã€ã€‚',
                observation: 'ä½ çœ‹åˆ°æœ‰äº›æ—äººé–‹å§‹èªªæ—¥èªï¼Œç©¿å’Œæœï¼Œä½ çš„å…’å­ä¹Ÿè¢«é€å»æ—¥æœ¬å­¸æ ¡ã€‚',
                worry: 'ä½ æ“”å¿ƒæ—äººæ¼¸æ¼¸å¿˜è¨˜å‚³çµ±ï¼Œä½†åˆç„¡åŠ›é˜»æ­¢é€™å€‹å¤§æ™‚ä»£çš„è®ŠåŒ–ã€‚',
                question: 'çœ‹è‘—æ–‡åŒ–é€æ¼¸æµå¤±ï¼Œä½ çš„æ„Ÿå—æ˜¯ï¼Ÿ',
                type: 'background',
                options: [
                    {
                        text: 'æˆ‘è¦åœ¨å®¶å·å·æ•™å­©å­æ—èªå’Œå‚³çµ±',
                        emotion: 'ğŸ˜°',
                        response: 'ä½ å·å·é€²è¡Œæ–‡åŒ–å‚³æ‰¿ï¼Œä½†ç¸½æ˜¯æå¿ƒåŠè†½ï¼Œæ€•è¢«ç™¼ç¾æœƒæœ‰å±éšªã€‚'
                    },
                    {
                        text: 'ä¹Ÿè¨±è·Ÿä¸Šæ™‚ä»£æ¯”è¼ƒå¥½...',
                        emotion: 'ğŸ˜',
                        response: 'ä½ é–‹å§‹æ‡·ç–‘å‚³çµ±çš„åƒ¹å€¼ï¼Œå…§å¿ƒå……æ»¿çŸ›ç›¾å’Œå¤±è½ã€‚'
                    }
                ]
            },
            {
                period: '1940å¹´ - çš‡æ°‘åŒ–é‹å‹•',
                background: 'æˆ°çˆ­çˆ†ç™¼ï¼Œæ—¥æœ¬æ¨è¡Œæ¿€é€²çš„çš‡æ°‘åŒ–æ”¿ç­–',
                context: 'æ”¿åºœå®£å¸ƒï¼šã€Œæ‰€æœ‰äººå¿…é ˆæ”¹ç”¨æ—¥æœ¬å§“åï¼Œæˆç‚ºçœŸæ­£çš„æ—¥æœ¬åœ‹æ°‘ï¼ä¸æ”¹åè€…è¦–ç‚ºä¸å¿ ï¼Œå¾Œæœè‡ªè² ï¼ã€',
                terror: 'ä½ çœ‹åˆ°æ‹’çµ•æ”¹åçš„é„°å±…è¢«æŠ“èµ°ï¼Œå­©å­è¢«å­¸æ ¡é€€å­¸ï¼Œå•†åº—æ‹’çµ•è³£æ±è¥¿çµ¦ä»–å€‘ã€‚',
                despair: 'é€™æ˜¯ä½ ç¬¬äºŒæ¬¡è¢«è¿«æ”¹åã€‚ä½ çš„ã€Œæé”é­¯ã€ä¹Ÿè¦æ¶ˆå¤±äº†ã€‚',
                question: 'é¢å°é€™å€‹å¨è„…ï¼Œä½ åªèƒ½ï¼Ÿ',
                type: 'pressure',
                options: [
                    {
                        text: 'ç‚ºäº†å®¶äººå®‰å…¨ï¼Œæ”¹åã€Œç”°ä¸­å¤ªéƒã€',
                        emotion: 'ğŸ˜¢',
                        response: 'ä½ å«æ·šæ”¹åï¼Œå¿ƒä¸­é»˜å¿µï¼šã€Œç¥–å…ˆå•Šï¼ŒåŸè«’æˆ‘ï¼Œæˆ‘ä¸å¾—ä¸é€™æ¨£åš...ã€',
                        newName: 'ç”°ä¸­å¤ªéƒ'
                    },
                    {
                        text: 'å¯§æ­»ä¸å±ˆï¼Œæ‹’çµ•æ”¹åï¼',
                        emotion: 'ğŸ˜¤',
                        response: 'ä½ æƒ³åæŠ—ï¼Œä½†çœ‹åˆ°å®¶äººææ‡¼çš„çœ¼ç¥ï¼Œæœ€çµ‚é‚„æ˜¯å¦¥å”äº†...ä½ è¦ºå¾—è‡ªå·±æ˜¯æ‡¦å¤«ã€‚',
                        newName: 'ç”°ä¸­å¤ªéƒ'
                    }
                ]
            },
            {
                period: '1945å¹´ - æˆ°å¾Œ',
                background: 'æ—¥æœ¬æˆ°æ•—ï¼Œåœ‹æ°‘æ”¿åºœæ¥ç®¡å°ç£',
                context: 'æ–°æ”¿åºœå®£å¸ƒï¼šã€Œå»é™¤æ—¥æœ¬æ®–æ°‘éºæ¯’ï¼æ‰€æœ‰äººæ”¹ç”¨ä¸­æ–‡å§“åï¼Œé‡å»ºä¸­è¯æ–‡åŒ–ï¼ã€',
                hope: 'ä½ å¿ƒæƒ³ï¼šã€Œçµ‚æ–¼å¯ä»¥æ¢å¾©åŸä¾†çš„åå­—äº†å—ï¼Ÿã€',
                reality: 'ä½†æˆ¶æ”¿äººå“¡èªªï¼šã€Œä½ å¯ä»¥æ”¹æˆæå¿—æ˜ã€æå¿—è¯é€™æ¨£çš„ä¸­æ–‡åå­—ã€‚ã€ä»–å€‘ä¸çŸ¥é“ä½ åŸæœ¬çš„æ—åã€‚',
                question: 'é¢å°ç¬¬ä¸‰æ¬¡æ”¹åï¼Œä½ çš„å¿ƒæƒ…æ˜¯ï¼Ÿ',
                type: 'background',
                options: [
                    {
                        text: 'è‡³å°‘èƒ½æ¢å¾©ã€Œæã€å§“ï¼Œæ¯”æ—¥æœ¬åå¥½',
                        emotion: 'ğŸ˜•',
                        response: 'ä½ å‹‰å¼·æ¥å—ã€Œæå¿—æ˜ã€ï¼Œé›–ç„¶ä¸æ˜¯åŸåï¼Œä½†è‡³å°‘æ“ºè„«äº†æ—¥æœ¬åå­—ã€‚',
                        newName: 'æå¿—æ˜'
                    },
                    {
                        text: 'æˆ‘æƒ³æ¢å¾©ã€Œå±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹ã€ï¼',
                        emotion: 'ğŸ˜“',
                        response: 'ä½ æå‡ºè¦æ±‚ï¼Œä½†è¢«å‘ŠçŸ¥ã€Œä¸åˆè¦å®šã€ã€‚ä½ åªèƒ½ç„¡å¥ˆåœ°æˆç‚ºã€Œæå¿—æ˜ã€ã€‚',
                        newName: 'æå¿—æ˜'
                    }
                ]
            },
            {
                period: '2001å¹´ - ç¾ä»£å›°å¢ƒ',
                background: 'ã€ŠåŸä½æ°‘èº«åˆ†æ³•ã€‹æ–½è¡Œï¼Œä½ çš„å­«å­æƒ³ç”³è«‹åŸä½æ°‘èº«åˆ†',
                context: 'æ‰¿è¾¦äººå“¡èªªï¼šã€Œå­©å­å¿…é ˆå¾å…·åŸä½æ°‘èº«åˆ†çš„ç¥–çˆ¶çš„å§“æ°ï¼Œæ‰èƒ½å–å¾—åŸä½æ°‘èº«åˆ†ã€‚ã€',
                irony: 'ä½ ç¾åœ¨çš„å§“æ°æ˜¯ã€Œæã€â€”â€”é€™æ˜¯300å¹´å‰æ¸…æœæ”¿åºœå¼·è¿«ä½ ç¥–å…ˆæ¥å—çš„æ¼¢å§“ï¼',
                absurdity: 'æ³•å¾‹ç«Ÿç„¶è¦æ±‚ç”¨ã€Œè¢«æ®–æ°‘è€…å¼·åŠ çš„å§“æ°ã€ä¾†è­‰æ˜ã€ŒåŸä½æ°‘èªåŒã€ã€‚',
                question: 'çŸ¥é“é€™å€‹è¦æ±‚å¾Œï¼Œä½ çš„æ„Ÿæƒ³æ˜¯ï¼Ÿ',
                type: 'irony',
                options: [
                    {
                        text: 'é€™å¤ªè’è¬¬äº†ï¼ç”¨è¢«è¿«çš„å§“æ°è­‰æ˜èªåŒï¼Ÿ',
                        emotion: 'ğŸ˜¡',
                        response: 'ä½ æ†¤æ€’åœ°æƒ³ï¼šã€Œæˆ‘å€‘è¢«è¿«æ”¹åä¸‰æ¬¡ï¼Œç¾åœ¨ç«Ÿç„¶è¦ç”¨é€™äº›å‚·ç—•ä¾†è­‰æ˜èº«åˆ†ï¼Ÿï¼ã€'
                    },
                    {
                        text: 'æ­·å²å¤ªæ²‰é‡äº†...æˆ‘å·²ç¶“ç´¯äº†',
                        emotion: 'ğŸ˜®â€ğŸ’¨',
                        response: 'ä½ æ·±æ·±å˜†æ¯ï¼šã€Œä¸€è¼©å­è¢«è¿«æ”¹åï¼Œç¾åœ¨é€£å­«å­éƒ½è¦æ‰¿å—é€™å€‹è’è¬¬...ã€'
                    }
                ]
            }
        ];

        // æ›´æ–°é€²åº¦æ¢
        function updateProgress() {
            const progress = ((currentEra + 1) / historicalEras.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `æ™‚ä»£ ${currentEra + 1} / ${historicalEras.length}`;
        }

        // è™•ç†é¸æ“‡
        function handleChoice(optionIndex) {
            const era = historicalEras[currentEra];
            const option = era.options[optionIndex];
            
            // é¡¯ç¤ºæƒ…æ„Ÿåæ‡‰
            showEmotionFeedback(option.emotion, option.response);
            
            // è¨˜éŒ„å§“åè®ŠåŒ–
            if (option.newName) {
                nameHistory.push({
                    era: era.period,
                    oldName: playerName,
                    newName: option.newName,
                    reason: 'è¢«è¿«æ”¹å'
                });
                playerName = option.newName;
            }
            
            // 3ç§’å¾Œé€²å…¥ä¸‹å€‹æ™‚ä»£
            setTimeout(() => {
                if (currentEra < historicalEras.length - 1) {
                    currentEra++;
                    renderEra();
                } else {
                    renderEndScreen();
                }
            }, 3000);
        }

        // é¡¯ç¤ºæƒ…æ„Ÿåæ‡‰
        function showEmotionFeedback(emotion, response) {
            const gameContent = document.getElementById('gameContent');
            const emotionDiv = document.createElement('div');
            emotionDiv.className = 'emotion-feedback';
            emotionDiv.innerHTML = `
                <div class="emotion-icon">${emotion}</div>
                <div class="emotion-text">"${response}"</div>
            `;
            gameContent.appendChild(emotionDiv);
        }

        // æ¸²æŸ“æ™‚ä»£å…§å®¹
        function renderEra() {
            const era = historicalEras[currentEra];
            updateProgress();
            
            let infoSections = '';
            
            // èƒŒæ™¯è³‡è¨Š
            infoSections += `
                <div class="info-box info-background">
                    <div class="info-title">ğŸ“– æ™‚ä»£èƒŒæ™¯</div>
                    <div>${era.background}</div>
                    <div style="margin-top: 8px; color: #64748b; font-size: 0.9rem;">${era.context}</div>
                </div>
            `;
            
            // æ ¹æ“šé¡å‹æ·»åŠ ä¸åŒè³‡è¨Š
            if (era.pressure) {
                infoSections += `
                    <div class="info-box info-pressure">
                        <div class="info-title">âš ï¸ å¤–ä¾†å£“åŠ›</div>
                        <div style="color: #dc2626; font-size: 0.9rem;">${era.pressure}</div>
                    </div>
                `;
            }
            
            if (era.dilemma) {
                infoSections += `
                    <div class="info-box info-pressure">
                        <div class="info-title">ğŸ˜° é¢è‡¨å›°å¢ƒ</div>
                        <div style="color: #ea580c; font-size: 0.9rem;">${era.dilemma}</div>
                    </div>
                `;
            }
            
            if (era.freedom) {
                infoSections += `
                    <div class="info-box info-freedom">
                        <div class="info-title">ğŸŒ¿ è‡ªç”±æ™‚å…‰</div>
                        <div style="color: #15803d; font-size: 0.9rem;">${era.freedom}</div>
                    </div>
                `;
            }
            
            if (era.irony) {
                infoSections += `
                    <div class="info-box info-irony">
                        <div class="info-title">ğŸ˜¤ æ­·å²è«·åˆº</div>
                        <div style="color: #d97706; font-size: 0.9rem;">${era.irony}</div>
                        <div style="color: #d97706; font-size: 0.9rem; margin-top: 4px;">${era.absurdity}</div>
                    </div>
                `;
            }
            
            // å…¶ä»–è³‡è¨Š
            ['observation', 'worry', 'terror', 'despair', 'hope', 'reality'].forEach(key => {
                if (era[key]) {
                    infoSections += `
                        <div class="info-box info-background">
                            <div style="color: #64748b; font-size: 0.9rem;">${era[key]}</div>
                        </div>
                    `;
                }
            });
            
            // é¸é …æŒ‰éˆ•
            const optionsHtml = era.options.map((option, index) => 
                `<button class="option-btn" onclick="handleChoice(${index})">${option.text}</button>`
            ).join('');
            
            const content = `
                <div class="name-display">
                    <h3>ä½ ç›®å‰çš„åå­—</h3>
                    <div class="current-name">${playerName}</div>
                </div>
                
                <div class="era-card">
                    <div class="era-header">
                        <div class="era-title">${era.period}</div>
                    </div>
                    <div class="era-content">
                        ${infoSections}
                        
                        <div class="question-section">
                            <div class="question-title">${era.question}</div>
                            <div class="options">
                                ${optionsHtml}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('gameContent').innerHTML = content;
        }

        // æ¸²æŸ“çµæŸç•«é¢
        function renderEndScreen() {
            document.getElementById('progressText').textContent = 'æ­·å²é«”é©—å®Œæˆ';
            
            // å§“åè®Šé·æ­·å²
            const timelineHtml = [
                {
                    title: '1600å¹´ï¼šå±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹',
                    desc: 'åŸå§‹çš„æ’ç£æ—åï¼Œå……æ»¿å®¶æ—æ¦®è€€å’Œæ–‡åŒ–æ„ç¾©',
                    class: 'timeline-original'
                },
                ...nameHistory.map(change => ({
                    title: `${change.era}ï¼š${change.newName}`,
                    desc: `${change.reason} - å¤±å»æ›´å¤šæ–‡åŒ–é€£çµ`,
                    class: 'timeline-forced'
                }))
            ].map(item => `
                <div class="timeline-item ${item.class}">
                    <div class="timeline-title">${item.title}</div>
                    <div class="timeline-desc">${item.desc}</div>
                </div>
            `).join('');
            
            const content = `
                <div class="end-screen">
                    <h1 class="end-title">æ­·å²çš„æ²‰é‡è¶³è·¡</h1>
                    <p style="font-size: 1.1rem; color: #64748b; margin-bottom: 30px;">
                        ä½ å·²ç¶“é«”é©—äº†400å¹´ä¾†åŸä½æ°‘è¢«è¿«æ”¹åçš„ç—›è‹¦æ­·ç¨‹
                    </p>
                    
                    <div style="background: white; border: 3px solid #ef4444; border-radius: 12px; overflow: hidden; margin-bottom: 30px;">
                        <div style="background: #ef4444; color: white; padding: 20px; text-align: center;">
                            <h2 style="font-size: 1.5rem;">å§“åè®Šé·è¡€æ·šå²</h2>
                        </div>
                        <div style="padding: 25px;">
                            <div class="history-timeline">
                                ${timelineHtml}
                            </div>
                        </div>
                    </div>
                    
                    <div class="lesson-cards">
                        <div class="lesson-card lesson-trauma">
                            <div class="info-title" style="color: #dc2626;">ğŸ”´ ä¸‰æ¬¡è¢«è¿«æ”¹å</div>
                            <div style="font-size: 0.9rem;">æ¸…æœè³œå§“ â†’ æ—¥æ²»çš‡æ°‘åŒ– â†’ æˆ°å¾Œä¸­æ–‡åŒ–</div>
                        </div>
                        
                        <div class="lesson-card lesson-culture">
                            <div class="info-title" style="color: #d97706;">ğŸ’” æ–‡åŒ–æ–·è£‚</div>
                            <div style="font-size: 0.9rem;">æ¯æ¬¡æ”¹åéƒ½æ„å‘³è‘—æ–‡åŒ–èªåŒçš„é€²ä¸€æ­¥å–ªå¤±</div>
                        </div>
                        
                        <div class="lesson-card lesson-justice">
                            <div class="info-title" style="color: #dc2626;">ğŸ˜¤ ç¾ä»£è«·åˆº</div>
                            <div style="font-size: 0.9rem;">ç¾åœ¨ç«Ÿç„¶è¦ç”¨ã€Œè¢«è¿«å–å¾—çš„æ¼¢å§“ã€ä¾†ã€Œè­‰æ˜åŸä½æ°‘èªåŒã€</div>
                        </div>
                    </div>
                    
                    <div class="final-verdict">
                        <div class="verdict-title">æ†²æ³•æ³•åº­çš„æ­£ç¾©</div>
                        <div style="text-align: center;">
                            <p style="font-size: 1.1rem; font-weight: bold; margin-bottom: 15px;">2022å¹´ï¼šå®£å‘Šé•æ†²ï¼</p>
                            <p style="margin-bottom: 15px;">
                                æ†²æ³•æ³•åº­çµ‚æ–¼çœ‹è¦‹äº†é€™å€‹æ­·å²è«·åˆºï¼Œå®£å‘Šå§“åæ¢æ¬¾é•æ†²ã€‚
                                ç´„9.5è¬äººå—ç›Šï¼Œæ³•å¾‹é ˆåœ¨2å¹´å…§ä¿®æ­£ã€‚
                            </p>
                        </div>
                        <div class="verdict-content">
                            <div style="font-size: 0.9rem;">
                                <strong>é‡è¦æ„ç¾©ï¼š</strong>æ‰¿èªäº†åŸä½æ°‘åœ¨æ­·å²ä¸Šæ‰¿å—çš„å§“åå£“è¿«ï¼Œ
                                ä¸æ‡‰è©²æˆç‚ºç¾ä»£èº«åˆ†èªå®šçš„éšœç¤™ã€‚
                            </div>
                        </div>
                    </div>
                    
                    <button class="reset-btn" onclick="resetGame()">é‡æ–°é«”é©—é€™æ®µæ­·å²</button>
                </div>
            `;
            
            document.getElementById('gameContent').innerHTML = content;
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            currentEra = 0;
            playerName = 'å±‹å·´å…‹ãƒ»é”é­¯ç‘ªå…‹';
            nameHistory = [];
            renderEra();
        }

        // åˆå§‹åŒ–éŠæˆ²
        renderEra();
    </script>
</body>
</html>
